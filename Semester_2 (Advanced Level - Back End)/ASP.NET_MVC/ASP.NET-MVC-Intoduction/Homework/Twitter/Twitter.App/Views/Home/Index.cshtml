@using System.Collections
@using System.Security.Cryptography
@using Microsoft.AspNet.Identity
@using Twitter.App.Models.BindingModels
@using Twitter.App.Models.ViewModels
@model IEnumerable<TweetViewModel>

@{
    ViewBag.Title = "Home Page";
}

@Html.Partial("_Messages", TempData)


@if (Request.IsAuthenticated)
{
    @Html.Partial("Partial/AddTweet", new TweetBindingModel())
}

<div class="tweets">
    @*@Html.DisplayForModel()*@

    @*Using Partial for my Infinite scroller*@
    @Html.Partial("DisplayTemplates/TweetViewModel", (ViewBag.Tweets as IEnumerable<TweetViewModel>))
</div>

@section scripts{
    <script src="~/Scripts/infiniteScroll.js"></script>
    <script src="~/Scripts/twitter.js"></script>
    <script type="text/javascript">
        var prepend = false;
        $(function() {
            $("div#loading").hide();
        });
        var moreRowsUrl = ""; //the URL to your ActionMethod
        $(window).scroll(scrollHandler);
    </script>
}
















@*@{
    ViewBag.Title = "Home Page";
}


<div class="row">
    
    @if (Request.IsAuthenticated)
    {
        <div class="col-md-4">
            <h4>Student</h4>
            <hr/>
            <dl class="dl-horizontal">
                @if (Model.Files.Any(f => f.FileType == FileType.Photo))
                {
                    <dt>
                        Photo
                    </dt>
                    <dd>
                        <img src="~/File?id=@Model.Files.First(f => f.FileType == FileType.Photo).FileId" alt="picture"/>
                    </dd>
                }
                <dt>
                    @Html.LabelFor(m => m.UserName)
                    @Html.DisplayFor(m => m.UserName)
                </dt>

            </dl>
        </div>

    }


    <div class="col-md-4">
        <h2>Getting started</h2>
        <p>
            ASP.NET MVC gives you a powerful, patterns-based way to build dynamic websites that
            enables a clean separation of concerns and gives you full control over markup
            for enjoyable, agile development.
        </p>
        <p>
            <a class="btn btn-default" href="http://go.microsoft.com/fwlink/?LinkId=301865">Learn more &raquo;</a>
        </p>
    </div>
    <div class="col-md-4">
        <h2>Get more libraries</h2>
        <p>NuGet is a free Visual Studio extension that makes it easy to add, remove, and update libraries and tools in Visual Studio projects.</p>
        <p>
            <a class="btn btn-default" href="http://go.microsoft.com/fwlink/?LinkId=301866">Learn more &raquo;</a>
        </p>
    </div>
    <div class="col-md-4">
        <h2>Web Hosting</h2>
        <p>You can easily find a web hosting company that offers the right mix of features and price for your applications.</p>
        <p>
            <a class="btn btn-default" href="http://go.microsoft.com/fwlink/?LinkId=301867">Learn more &raquo;</a>
        </p>
    </div>
</div>*@